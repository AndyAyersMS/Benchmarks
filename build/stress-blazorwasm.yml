variables:
  - name: _TeamName
    value: AspNetCore

pool: ASP.NET-Performance-Controller

# Don't trigger this job on code changes
# trigger:
#   batch: true
#   branches:
#     include:
#     - master

# Don't run on PRs
# pr:
#   autoCancel: false
#   branches:
#     include:
#     - '*'

# All the jobs are triggered at the same time
# Jobs are run in parallel
# Steps are serial

jobs:
- job: Blazor Wasm Stress
  steps:
  - powershell: |
        cd ./src/BenchmarksDriver2
        $SESSION = "session"
        $BENCHMARKS_SQL = "connectionstring"
        $DURATION = 180 #86400
        dotnet run -c release -- --config https://raw.githubusercontent.com/dotnet/aspnetcore/master/src/Components/benchmarkapps/Wasm.Performance/benchmarks.compose.json --scenario blazorwasmbenchmark --application.options.requiredOperatingSystem Linux --application.environmentVariables StressRunDuration=$DURATION --application.endpoints http://10.0.0.6:6001 --application.options.displayOutput true --auto-flush # --session $SESSION --sql "$BENCHMARKS_SQL" --table BlazorWasmStress
